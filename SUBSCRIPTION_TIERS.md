# AgroShield Premium Features & Subscription Tiers

## ğŸŒŸ Overview

AgroShield now offers a comprehensive SaaS monetization system with **3 subscription tiers** (FREE, PRO, EXPERT) and **5 payment providers** (M-Pesa, Stripe, PayPal, Crypto, Visa).

---

## ğŸ“Š Subscription Tiers

### ğŸ†“ FREE Tier (KES 0 / USD 0)

**Basic agricultural support for all farmers**

#### Features Included:
- âœ… **Weather & Climate**
  - Basic weather alerts
  - Standard 7-day forecast
  
- âœ… **Pest & Disease**
  - Basic pest alerts
  - Camera scan diagnosis (high confidence only - 70%+)
  - Up to 10 scans per month
  
- âœ… **Growth & Planning**
  - Basic calendar
  - Growth tracking
  
- âœ… **Market & Pricing**
  - Basic market prices
  
- âœ… **Storage & Monitoring**
  - Basic storage monitoring (daily intervals)
  - 1 storage device
  
- âœ… **Soil & Fertilizer**
  - Basic soil information
  
- âœ… **Community**
  - Village groups
  - Partner campaigns
  - Standard support

#### Limits:
- ğŸ“ Max 2 fields
- ğŸ“¸ Max 10 scans/month
- ğŸ“¦ 1 storage device
- ğŸ“Š Daily storage monitoring (24-hour intervals)

---

### ğŸ’¼ PRO Tier (KES 250 / USD 5 per month)

**For serious farmers optimizing yields and profits**

#### Everything in FREE, plus:

- âœ¨ **Advanced Weather & Climate**
  - Advanced weather forecasts
  - Climate prediction models
  
- âœ¨ **Enhanced Diagnostics**
  - Medium confidence scans (50%+)
  - Up to 50 scans per month
  
- âœ¨ **Yield & Profit Forecasting** â­
  - AI-powered yield predictions
  - Profit forecasting with market prices
  - What-If scenario calculator (ROI analysis)
  - Investment decision support
  
- âœ¨ **Premium Market Intelligence** â­
  - Premium market access alerts
  - Regional market comparison (Nairobi, Mombasa, Kisumu)
  - Optimal sale window recommendations
  - Profit increase predictions
  
- âœ¨ **Advanced Growth Tracking**
  - Detailed growth analytics
  
- âœ¨ **Enhanced Storage**
  - Hourly monitoring (60-minute intervals)
  - Up to 3 storage devices

#### Limits:
- ğŸ“ Max 10 fields
- ğŸ“¸ Max 50 scans/month
- ğŸ“¦ 3 storage devices
- ğŸ“Š Hourly storage monitoring

#### Pricing:
- **Monthly:** KES 250 / USD 5
- **Annual:** KES 2,500 / USD 50 (2 months free!)

---

### ğŸ‘¨â€ğŸ”¬ EXPERT Tier (KES 750 / USD 15 per month)

**For professional farmers & agricultural entrepreneurs**

#### Everything in PRO, plus:

- ğŸš€ **Priority Expert Support** â­
  - Human expert diagnosis
  - **Guaranteed 2-hour response time**
  - High-priority queue placement
  
- ğŸš€ **Advanced Diagnostics**
  - Low confidence scans (30%+)
  - Unlimited scans per month
  - **Spectral/Multi-layer Analysis** â­
  - Pre-symptomatic deficiency detection (14 days advance warning)
  - Subtle color variation analysis
  
- ğŸš€ **Custom Fertilizer Plans** â­
  - Stage-specific NPK blending
  - Custom soil blending recommendations
  - Certified dealer contacts
  - Organic alternatives
  
- ğŸš€ **High-Frequency Storage Monitoring** â­
  - **5-minute intervals** (288 data points/day)
  - Storage health scores
  - Trend analysis
  - **Quality Certificates** for premium buyers
  - Certificate eligibility tracking
  
- ğŸš€ **IoT Integration** â­
  - API key generation for third-party sensors
  - Webhook integration
  - Custom sensor support
  - Irrigation system integration
  - Weather station integration
  
- ğŸš€ **Credit & Finance**
  - **Agri-Reliability Score** (0-100)
  - Credit assessment for agricultural loans
  - Performance tracking

#### Limits:
- ğŸ“ **Unlimited fields**
- ğŸ“¸ **Unlimited scans**
- ğŸ“¦ **Unlimited storage devices**
- ğŸ“Š 5-minute storage monitoring

#### Pricing:
- **Monthly:** KES 750 / USD 15
- **Annual:** KES 7,500 / USD 150 (2 months free!)

---

## ğŸ’° Pay-Per-Service Options

For farmers who don't need a full subscription:

### 1. Expert Diagnosis (KES 50 / USD 1)
- One photo forwarded to human expert
- Professional diagnosis within 48 hours
- Valid for 48 hours

### 2. Custom Fertilizer Plan (KES 50 / USD 1)
- One custom soil blending plan
- Stage-specific recommendations
- Valid for 7 days

### 3. IoT Integration Setup (KES 100 / USD 2)
- API key for third-party sensors
- 30-day integration access
- Documentation included

### 4. Storage Certificate (KES 75 / USD 1.50)
- Quality certification document
- QR code verification
- Single certificate generation

---

## ğŸ’³ Payment Methods

### ğŸ‡°ğŸ‡ª Kenya
- **M-Pesa** (Recommended) - Mobile money, instant
- **Visa/Mastercard** via Flutterwave
- **Crypto** (BTC, ETH, USDT, USDC)

### ğŸŒ International
- **Stripe** - Credit/debit cards
- **PayPal** - Global payment system
- **Crypto** - Bitcoin, Ethereum, stablecoins

---

## ğŸ¯ Feature Comparison Table

| Feature | FREE | PRO | EXPERT |
|---------|------|-----|--------|
| **Weather Alerts** | Basic | Advanced | Advanced |
| **Climate Prediction** | âŒ | âœ… | âœ… |
| **Pest Scanning** | 10/month | 50/month | Unlimited |
| **Scan Confidence** | 70%+ | 50%+ | 30%+ |
| **Yield Forecasting** | âŒ | âœ… | âœ… |
| **What-If Scenarios** | âŒ | âœ… | âœ… |
| **Market Alerts** | Basic | Premium | Premium |
| **Regional Comparison** | âŒ | âœ… | âœ… |
| **Expert Diagnosis** | Pay-per-use | Pay-per-use | âœ… Included |
| **Priority Response** | âŒ | âŒ | âœ… 2hr |
| **Spectral Analysis** | âŒ | âŒ | âœ… |
| **Pre-symptom Detection** | âŒ | âŒ | âœ… 14 days |
| **Custom Fertilizer** | âŒ | âŒ | âœ… |
| **Storage Monitoring** | Daily | Hourly | 5-min |
| **Storage Certificates** | âŒ | âŒ | âœ… |
| **IoT Integration** | âŒ | âŒ | âœ… |
| **Agri-Credit Score** | âŒ | âŒ | âœ… |
| **Max Fields** | 2 | 10 | Unlimited |
| **Storage Devices** | 1 | 3 | Unlimited |

---

## ğŸ”§ Technical Implementation

### Backend Routes Created:

1. **`/api/payments`** - Multi-provider payment processing
   - POST `/subscribe` - Create subscription
   - POST `/pay-per-service` - One-time purchases
   - POST `/check-feature-access` - Verify feature access
   - GET `/user-features/{user_id}` - Get user's available features
   - POST `/mpesa-callback` - M-Pesa webhook
   - POST `/stripe-webhook` - Stripe webhook
   - POST `/crypto-callback` - Crypto webhook

2. **`/api/premium`** - Premium feature endpoints
   - POST `/yield-forecast` - AI yield prediction (PRO+)
   - POST `/what-if-scenario` - ROI calculator (PRO+)
   - GET `/premium-market-alerts/{crop}` - Market intelligence (PRO+)
   - POST `/priority-expert-triage` - Expert support (EXPERT)
   - POST `/spectral-analysis` - Pre-symptom detection (EXPERT)
   - POST `/custom-fertilizer-plan` - Custom blending (EXPERT)
   - GET `/storage-monitoring/{device_id}` - Storage data (All tiers)
   - POST `/storage-certificate` - Quality certificate (EXPERT)
   - POST `/iot-api-key` - API key generation (EXPERT)

### Feature Guard Middleware:

```python
# Enforce feature access
@require_feature("yield_forecasting")
async def get_forecast(user_id: str):
    ...

# Enforce subscription tier
@require_tier("PRO")
async def pro_feature(user_id: str):
    ...

# Enforce usage limits
@check_limit("max_scans_per_month")
async def scan_plant(user_id: str):
    ...
```

### Frontend Screens Created:

1. **SubscriptionScreen.js** - Tier selection & payment
2. **TransactionsScreen.js** - Payment history
3. **YieldForecastScreen.js** - Forecasting & What-If calculator
4. **MarketAlertsScreen.js** - Premium market intelligence

---

## ğŸš€ Getting Started

### For Users:

1. **Download AgroShield** app
2. **Register** with phone number
3. Start with **FREE tier** - no payment required
4. **Upgrade** when you need more features:
   - Tap "Subscription" in menu
   - Choose PRO or EXPERT
   - Select payment method
   - Complete payment

### For Developers:

1. **Configure payment providers** (see `PAYMENT_SETUP_GUIDE.py`)
2. **Set environment variables** in `.env` file
3. **Test with sandbox credentials**
4. **Deploy with HTTPS** (required for webhooks)
5. **Move to production** keys when ready

---

## ğŸ“ˆ Pricing Strategy

### Why These Prices?

- **FREE Tier:** Acquire users, build trust
- **PRO Tier (KES 250):** ~$5 USD/month - affordable for smallholder farmers
- **EXPERT Tier (KES 750):** ~$15 USD/month - commercial farmers & co-ops

### Annual Discount:
- Pay for 10 months, get 12 months (17% off)
- Encourages longer commitment
- Improves cash flow predictability

### Regional Pricing:
- **Kenya:** Priced in KES (local currency)
- **International:** Priced in USD
- Automatic currency conversion

---

## ğŸ“ Use Cases

### FREE Tier:
- **Beginner farmers** learning digital agriculture
- **Smallholders** with 1-2 fields
- **Testing** the platform before committing

### PRO Tier:
- **Commercial farmers** with 3-10 fields
- **Farmers** optimizing yields and profits
- **Market-savvy farmers** timing sales for max profit

### EXPERT Tier:
- **Agricultural entrepreneurs** with large operations
- **Cooperatives** managing multiple farmers
- **Export farmers** requiring quality certificates
- **Tech-savvy farmers** integrating IoT sensors

---

## ğŸ” Security & Compliance

- âœ… PCI DSS compliant (card payments via Stripe/PayPal)
- âœ… Webhook signature verification
- âœ… HTTPS-only payment endpoints
- âœ… No card details stored locally
- âœ… Transaction logging for audit trail
- âœ… Rate limiting on payment endpoints

---

## ğŸ“ Support

### Payment Issues:
- **M-Pesa:** Contact Safaricom support
- **Stripe/PayPal:** Email support@agroshield.com
- **Crypto:** Check transaction on blockchain explorer

### Feature Access Issues:
- Check subscription status in app
- Verify payment completion
- Contact support@agroshield.com

### Upgrades & Downgrades:
- Upgrade anytime - takes effect immediately
- Downgrade at end of billing period
- Refunds not available for partial months

---

## ğŸ”„ Subscription Lifecycle

1. **Free Trial:** Start with FREE tier (no card required)
2. **Upgrade:** Choose PRO or EXPERT, complete payment
3. **Active:** Full feature access until expiry
4. **Renewal:** Auto-renew or manual renewal
5. **Expiry Warning:** SMS reminder 3 days before expiry
6. **Expired:** Downgrade to FREE tier
7. **Reactivation:** Pay to restore premium features

---

## ğŸ“Š Agri-Reliability Score (EXPERT Only)

A credit score for agricultural loans, calculated from:

- **Successful Harvests (30%):** Completed growing seasons
- **AI Recommendations (25%):** Following AgroShield advice
- **Timely Actions (20%):** Pest control, fertilizer application
- **Community Engagement (15%):** Sharing feedback, helping others
- **Account Age (10%):** Months using AgroShield

**Score Range:** 0-100
- **80-100:** Excellent (eligible for premium loans)
- **60-79:** Good (standard loan terms)
- **40-59:** Fair (higher interest rates)
- **0-39:** Poor (loan approval unlikely)

---

## ğŸŒ± Roadmap

### Coming Soon:
- [ ] Mobile banking integration (Equity, KCB)
- [ ] USSD payment option (*384*96#)
- [ ] Cooperative/group subscriptions (bulk pricing)
- [ ] Partner financing (buy-now-pay-later)
- [ ] Input credit integration (fertilizer on credit)

---

## ğŸ“„ License

Copyright Â© 2025 AgroShield. All rights reserved.

---

**Made with ğŸ’š for African farmers**
